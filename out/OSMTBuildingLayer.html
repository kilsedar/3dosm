<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: OSMTBuildingLayer</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: OSMTBuildingLayer</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>OSMTBuildingLayer<span class="signature">(worldWindow, configuration, source)</span><span class="type-signature"></span></h2>
        
            <div class="class-description">Attempts to create tiles (sectors) using the bounding box of the layer with a fixed size for all the zoom levels. For each sector makes a new request to OSM if the sector is visible.
Upon gestures, adds and/or removes the layers corresponding to the sectors.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="OSMTBuildingLayer"><span class="type-signature"></span>new OSMTBuildingLayer<span class="signature">(worldWindow, configuration, source)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Creates a sublass of the OSMBuildingLayer class.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>worldWindow</code></td>
            

            <td class="type">
            
                
<span class="param-type">WorldWindow</span>


            
            </td>

            

            

            <td class="description last">The WorldWindow where the OSMTBuildingLayer is added to.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>configuration</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Configuration is used to set the attributes of ShapeAttributes. Four more attributes can be defined, which are "extrude", "heatmap", "altitude" and "altitudeMode".</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>source</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Defines the data source of the <a href="OSMTBuildingLayer.html">OSMTBuildingLayer</a>.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="OSMTBuildingLayer.js.html">OSMTBuildingLayer.js</a>, <a href="OSMTBuildingLayer.js.html#line34">line 34</a>
    </li></ul></dd>
    

    

    

    
</dl>


















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="add"><span class="type-signature"></span>add<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Calls <a href="OSMTBuildingLayer.html#createSectors">createSectors</a> and <a href="OSMTBuildingLayer.html#addBySector">addBySector</a> if the "type" of the layer's "_source" member variable is "boundingBox" and the "coordinates" of the layer's "_source" member variable is defined.
Also registers the GestureRecognizers, which are DragRecognizer, PanRecognizer, ClickRecognizer, TapRecognizer, PinchRecognizer, RotationRecognizer and TiltRecognizer.
Calls addByGeoJSONFile if the "type" of the layer's "_source" member variable is "GeoJSONFile" and the "path" of the layer's "_source" member variable is defined.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="OSMTBuildingLayer.js.html">OSMTBuildingLayer.js</a>, <a href="OSMTBuildingLayer.js.html#line132">line 132</a>
    </li></ul></dd>
    

    

    

    
</dl>











<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If the source definition is wrong.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">ArgumentError</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







        
            

    

    
    <h4 class="name" id="addBySector"><span class="type-signature"></span>addBySector<span class="signature">(sector)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Makes an AJAX request to fetch the OSM building data using the sector's minimum and maximum latitude and longitude and Overpass API, converts it to GeoJSON using osmtogeojson API,
adds the GeoJSON to the WorldWindow using the GeoJSONParserTriangulationOSM.
Also caches the OSMBuildingLayer corresponding to the sector using as id the sector's minimum and maximum latitude and longitude.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sector</code></td>
            

            <td class="type">
            
                
<span class="param-type">Sector</span>


            
            </td>

            

            

            <td class="description last">A Sector of the OSMTBuildingLayer.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="OSMTBuildingLayer.js.html">OSMTBuildingLayer.js</a>, <a href="OSMTBuildingLayer.js.html#line165">line 165</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="createSectors"><span class="type-signature"></span>createSectors<span class="signature">(boundingBox)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sectorizes a bounding box. Each sector initially will be 0.02 to 0.02 degrees for all the zoom levels.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>boundingBox</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Float></span>


            
            </td>

            

            

            <td class="description last">The bounding box to be sectorized. Intended to be the bounding box of the whole layer.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="OSMTBuildingLayer.js.html">OSMTBuildingLayer.js</a>, <a href="OSMTBuildingLayer.js.html#line87">line 87</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="gestureRecognizerCallback"><span class="type-signature"></span>gestureRecognizerCallback<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    The callback for GestureRecognizers, which are DragRecognizer, PanRecognizer, ClickRecognizer, TapRecognizer, PinchRecognizer, RotationRecognizer and TiltRecognizer.
For each sector of the layer, checks if it is visible. If it is and its layer is not added to the WorldWindow, checks the cache.
If the layer corresponding to the sector is in the cache uses the cache, otherwise makes a request to OSM. If it is not visible and it is added to the WorldWindow, removes it.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="OSMTBuildingLayer.js.html">OSMTBuildingLayer.js</a>, <a href="OSMTBuildingLayer.js.html#line59">line 59</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="intersectsVisible"><span class="type-signature"></span>intersectsVisible<span class="signature">(sector)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Checks if a given sector is visible.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sector</code></td>
            

            <td class="type">
            
                
<span class="param-type">Sector</span>


            
            </td>

            

            

            <td class="description last">A Sector of the OSMTBuildingLayer.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="OSMTBuildingLayer.js.html">OSMTBuildingLayer.js</a>, <a href="OSMTBuildingLayer.js.html#line119">line 119</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    True if the sector intersects the frustum, otherwise false.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="OSMTBuildingLayer.html">OSMTBuildingLayer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.3</a> on Sun Jul 23 2017 01:04:19 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: OSMLayer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: OSMLayer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @exports OSMLayer
 */
define(['libraries/WebWorldWind/src/error/ArgumentError',
        'libraries/WebWorldWind/src/util/Logger'],
       function (ArgumentError, Logger) {
  "use strict";

  /**
   * Constructs an OSMLayer for a specified {@link WorldWindow}.
   * @alias OSMLayer
   * @constructor
   * @classdesc Sets the properties and functions viable for any OSM data. It is intended to be an abstract class, only to be extended for specific OSM data.
   * @param {WorldWindow} worldWindow The WorldWindow where the OSMLayer is added to.
   * @param {Object} configuration Configuration is used to set the attributes of {@link PlacemarkAttributes} or {@link ShapeAttributes}.
   */
  var OSMLayer = function (worldWindow, configuration) {
    /**
     * The WorldWindow where the OSMLayer is added to.
     * @memberof OSMLayer.prototype
     * @type {WorldWindow}
     */
    this._worldWindow = worldWindow;

    /**
     * Configuration is used to set the attributes of {@link PlacemarkAttributes} if the geometry is Point or MultiPoint; or of {@link ShapeAttributes} otherwise.
     * @memberof OSMLayer.prototype
     * @type {Object}
     */
    this._configuration = configuration;

    /**
     * The type of the OSM data. It can be "node", "way", or "relation".
     * @memberof OSMLayer.prototype
     * @type {String}
     */
    this._type = null;

    /**
     * The tag of the OSM data. It can have values defined at http://wiki.openstreetmap.org/wiki/Map_Features.
     * Some examples are "amenity", "amenity=education"; "building", "building=farm" ...
     * @memberof OSMLayer.prototype
     * @type {String}
     */
    this._tag = null;

    this._boundingBox = null;
  };

  Object.defineProperties (OSMLayer.prototype, {
    /**
     * It defines the bounding box of the OSM data for the OSMLayer. The order of coordinates of the bounding box is "x1, y1, x2, y2".
     * @memberof OSMLayer.prototype
     * @type {Float[]}
     */
    boundingBox: {
      get: function() {
        return this._boundingBox;
      },
      set: function(boundingBox) {
        this._boundingBox = boundingBox;
      }
    }
  });

  /**
   * Sets the attributes of {@link PlacemarkAttributes} if the geometry is Point or MultiPoint; or of {@link ShapeAttributes} otherwise.
   * @param {GeoJSONGeometry} geometry An object containing the geometry of the OSM data in GeoJSON format for the OSMLayer.
   * @returns {Object} An object with its attributes set as {@link PlacemarkAttributes} or {@link ShapeAttributes},
   * where for both their attributes are defined in the configuration of the OSMLayer.
   */
  OSMLayer.prototype.shapeConfigurationCallback = function (geometry) {
    var configuration = {};

    if (geometry.isPointType() || geometry.isMultiPointType()) {
      var placemarkAttributes = new WorldWind.PlacemarkAttributes(null);
      for (var key in this._configuration)
        placemarkAttributes[key] = this._configuration[key];
      configuration.attributes = new WorldWind.PlacemarkAttributes(placemarkAttributes);
    }
    else {
      configuration.attributes =  new WorldWind.ShapeAttributes(null);
      for (var key in this._configuration)
        configuration.attributes[key] = this._configuration[key];
    }

    return configuration;
  };

  /**
   * Zooms to the OSMLayer, by setting the center of the viewport to the center of the bounding box.
   * It uses an arbitrary value for the range of {@link LookAtNavigator}.
   * To be removed later.
   * @throws {ArgumentError} If boundingBox of the layer is null.
   */
  OSMLayer.prototype.zoom = function () {
    if (this._boundingBox != null) {
      var boundingBox = this._boundingBox;
      var centerX = (boundingBox[0] + boundingBox[2])/2;
      var centerY = (boundingBox[1] + boundingBox[3])/2;
      this._worldWindow.navigator.lookAtLocation.longitude = centerX;
      this._worldWindow.navigator.lookAtLocation.latitude = centerY;
      // console.log(centerX + ", " + centerY);
      this._worldWindow.navigator.range = 1e4; // Should be automatically calculated.
      this._worldWindow.redraw();
    }
    else {
      throw new ArgumentError(
        Logger.logMessage(Logger.LEVEL_SEVERE, "OSMLayer", "zoom", "The bounding box of the layer is null.")
      );
    }
  };

  return OSMLayer;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="OSMLayer.html">OSMLayer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue Jul 25 2017 17:06:50 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
